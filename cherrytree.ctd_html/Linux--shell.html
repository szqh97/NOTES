<!doctype html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><title>shell</title><meta name="generator" content="CherryTree"></head><body><table width="100%"><tr><td valign="top" align=cons.TAG_PROP_LEFT width=20%><table style="text-align:left; font-family: Sans; font-size:11pt"><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="C++.html">1 C++</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="C++--tips.html">1.1 tips</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="C++--FAQ.html">1.2 FAQ</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="C++--todo.html">1.3 todo</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="C++--others.html">1.4 others</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="C++--vobile 常用.html">1.5 vobile 常用</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="C++--snippet.html">1.6 snippet</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_black.png" alt="images/cherry_black.png" height="22" width="22"/><a href="C++--Modern C++ .html">1.7 Modern C++ </a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_black.png" alt="images/cherry_black.png" height="22" width="22"/><a href="C++--bak.html">1.8 bak</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="go.html">2 go</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="go--nsq-notes.html">2.1 nsq-notes</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="go--go_tips.html">2.2 go_tips</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="Q&A.html">3 Q&A</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="kernel.html">4 kernel</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="ffmpeg.html">5 ffmpeg</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="ffmpeg--ffmpeg SDK.html">5.1 ffmpeg SDK</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="ffmpeg--ffmpeg.html">5.2 ffmpeg</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="python.html">6 python</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="python--tips.html">6.1 tips</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_green.png" alt="images/cherry_green.png" height="22" width="22"/><a href="python--collections.html">6.2 collections</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="python--oneline.html">6.3 oneline</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="Lua.html">7 Lua</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Lua--tips.html">7.1 tips</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="Linux.html">8 Linux</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Linux--shell.html">8.1 shell</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Linux--collections.html">8.2 collections</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Linux--screen.html">8.3 screen</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Linux--core文件设置.html">8.4 core文件设置</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Linux--Linux 常用.html">8.5 Linux 常用</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_orange.png" alt="images/cherry_orange.png" height="22" width="22"/><a href="Linux--Linux 常用--screen.html">8.5.1 screen</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_orange.png" alt="images/cherry_orange.png" height="22" width="22"/><a href="Linux--Linux 常用--core文件设置.html">8.5.2 core文件设置</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_purple.png" alt="images/cherry_purple.png" height="22" width="22"/><a href="Linux--sed.html">8.6 sed</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="gdb.html">9 gdb</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="tools.html">10 tools</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="vim.html">11 vim</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="vim--vim常用 .html">11.1 vim常用 </a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="vobile.html">12 vobile</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="vobile--vobile 常用.html">12.1 vobile 常用</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="vobile--work.html">12.2 work</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="Myself.html">13 Myself</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Myself--TOREAD.html">13.1 TOREAD</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Myself--music.html">13.2 music</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Myself--todo.html">13.3 todo</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Myself--work.html">13.4 work</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="Myself--HZ.html">13.5 HZ</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="opencv.html">14 opencv</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="opencv--CvArr、Mat、CvMat、IplImage、BYTE转换  .html">14.1 CvArr、Mat、CvMat、IplImage、BYTE转换  </a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="opencv--resize.html">14.2 resize</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="work.html">15 work</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="work--TODO.html">15.1 TODO</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="work--OCR.html">15.2 OCR</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_blue.png" alt="images/cherry_blue.png" height="22" width="22"/><a href="work--todo.html">15.3 todo</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/cherry_gray.png" alt="images/cherry_gray.png" height="22" width="22"/><a href="work--sql.html">15.4 sql</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="CNTV.html">16 CNTV</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="Mysql.html">17 Mysql</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="git.html">18 git</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="others.html">19 others</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_purple.png" alt="images/cherry_purple.png" height="22" width="22"/><a href="gnuplot.html">20 gnuplot</a></td></tr><tr><td>&nbsp;&nbsp;&nbsp;<img src="images/cherry_red.png" alt="images/cherry_red.png" height="22" width="22"/><a href="todo.html">21 todo</a></td></tr></table><td valign="top" align=cons.TAG_PROP_LEFT width=80%><span style="font-family: 文泉驿微米黑; font-size:12pt">find &lt;CONDITION to Find files&gt; -exec &lt;OPERATION&gt; \;<br>find -mmin -60 -exec ls -l {} \;<br><br>redirect io to null <br>command &gt; /dev/null 1&gt;2&amp;<br><br>1.   set -u，当你使用未初始化的变量时，让bash自动退出。你也可以使用可读性更强一点的set -o nounset<br><br>2. <br><table border="1" style="display:inline-table; font-family: Monospace; font-size:12pt"><tr><td>&nbsp;八进制转十进制：<br><br>[chengmo@centos5&nbsp;~]$&nbsp;((num=<span style="color:#ff0044;font-weight:400">0123</span>));<br>[chengmo@centos5&nbsp;~]$&nbsp;echo&nbsp;$num;<br><span style="color:#ff0044;font-weight:400">83</span><br><br>[chengmo@centos5&nbsp;~]$&nbsp;((num=<span style="color:#ff0044;font-weight:400">8</span>#<span style="color:#ff0044;font-weight:400">123</span>));<br>[chengmo@centos5&nbsp;~]$&nbsp;echo&nbsp;$num;<br><span style="color:#ff0044;font-weight:400">83</span><br>一、Linux&nbsp;shell&nbsp;截取字符变量的前8位，有方法如下：<br>　　1.expr&nbsp;substr&nbsp;“$a”&nbsp;<span style="color:#ff0044;font-weight:400">1</span>&nbsp;<span style="color:#ff0044;font-weight:400">8</span><br>　　2.echo&nbsp;$a|awk&nbsp;‘{print&nbsp;substr(,<span style="color:#ff0044;font-weight:400">1</span>,<span style="color:#ff0044;font-weight:400">8</span>)}’<br>　　3.echo&nbsp;$a|cut&nbsp;-c1-<span style="color:#ff0044;font-weight:400">8</span><br>　　4.expr&nbsp;$a&nbsp;:&nbsp;‘\(.\\).*’<br>　　5.echo&nbsp;$a|dd&nbsp;bs=<span style="color:#ff0044;font-weight:400">1</span>&nbsp;count=<span style="color:#ff0044;font-weight:400">8</span>&nbsp;<span style="color:#ff0044;font-weight:400">2</span>&gt;/dev/null<br>　　二、按指定的字符串截取<br>　　<span style="color:#ff0044;font-weight:400">1</span>、第一种方法:&nbsp;<br>　　${varible##*string}&nbsp;从左向右截取最后一个string后的字符串&nbsp;<br>　　${varible#*string}从左向右截取第一个string后的字符串&nbsp;<br>　　${varible%%string*}从右向左截取最后一个string后的字符串&nbsp;<br>　　${varible%string*}从右向左截取第一个string后的字符串&nbsp;“*”只是一个通配符可以不要<br>例子：&nbsp;$&nbsp;MYVAR=foodforthought.jpg&nbsp;$&nbsp;echo&nbsp;${MYVAR##*fo}&nbsp;rthought.jpg&nbsp;$&nbsp;echo&nbsp;${MYVAR#*fo}&nbsp;odforthought.jpg<br>　　<span style="color:#ff0044;font-weight:400">2</span>、第二种方法：<br>　　${varible:n1:n2}:截取变量varible从n1到n2之间的字符串。<br>可以根据特定字符偏移和长度，使用另一种形式的变量扩展，来选择特定子字符串。试着在&nbsp;bash&nbsp;中输入以下行：&nbsp;$&nbsp;EXCLAIM=cowabunga&nbsp;$&nbsp;echo&nbsp;${EXCLAIM:<span style="color:#ff0044;font-weight:400">0</span>:<span style="color:#ff0044;font-weight:400">3</span>}&nbsp;cow&nbsp;$&nbsp;echo&nbsp;${EXCLAIM:<span style="color:#ff0044;font-weight:400">3</span>:<span style="color:#ff0044;font-weight:400">7</span>}&nbsp;abunga<br>这种形式的字符串截断非常简便，只需用冒号分开来指定起始字符和子字符串长度。<br>三、按照指定要求分割：&nbsp;比如获取后缀名&nbsp;ls&nbsp;-al&nbsp;|&nbsp;cut&nbsp;-d&nbsp;“.”&nbsp;-f2</td></tr></table><br><br><br>  $! 是一个进程的pid<br><br>防止脚本重复运行方法<br><br><br><br>main(){<br>selfPID="$$"<br>scriptFile="$0"<br> <br>typeset existingPid<br>existingPid=`getExistingPIDs $selfPID "$scriptFile"`<br> <br>if [ ! -z "$existingPid" ]; then<br>  echo "The script already running, exiting..."<br>  exit -1<br>fi<br> <br>doItsTask<br> <br>}<br> <br>#获取除本身进程以外其它运行当前脚本的进程的 PID<br>getExistingPIDs(){<br>selfPID="$1"<br>scriptFile="$2"<br> <br>ps -ef | grep "/usr/bin/ksh ${scriptFile}" | grep -v "grep" | awk "{ if(\$2!=$selfPID) print \$2 }"<br>}<br> <br>doItsTask(){<br>echo "Task is now being executed..."<br>sleep 20  #睡眠 20s，以模拟脚本在执行需要长时间完成的任务<br>}<br> <br>main $*<br><br><br></span></td></tr></table></body></html>